Эмулятор оболочки. Этап 5

Программа с GUI, где можно вводить команды вручную или запускать стартовый скрипт. Поддерживается работа с виртуальной файловой системой (VFS), которая хранится в JSON-файле и полностью загружается в память при запуске эмулятора. Изменения вносятся только в оперативной памяти, без модификации исходного файла.

Параметры запуска:
--vfs <файл> - JSON-файл VFS (по умолчанию VFS.json)
--script <файл> - стартовый скрипт (по умолчанию None)
--debug - включение режима отладки
--name <строка> - имя VFS, отображаемое в приглашении (по умолчанию VFS)

Основные возможности:
Эмулятор поддерживает команды для работы с VFS, имитируя поведение UNIX-подобной командной строки. Все операции происходят в памяти.

Поддерживаемые команды:

ls — выводит список файлов и папок в текущем каталоге. Каталоги отображаются с символом “/” на конце.
Пример: ls

cd <путь> — переход в указанный каталог. Поддерживаются абсолютные (/home/user) и относительные (../docs) пути.
Пример: cd home/user/docs

cat <файл> — выводит содержимое текстового файла. Если файл закодирован в base64, он автоматически декодируется.
Пример: cat note.txt

pwd — показывает текущий путь в виртуальной файловой системе.
Пример: pwd

head <файл> [n] - выводит первые n строк указанного файла (по умолчанию 10).
Пример: head note.txt 5

mkdir <имя_каталога> - создаёт новый каталог в текущем каталоге. Изменение фиксируется только в памяти, без записи в JSON-файл.
Пример: mkdir new_folder

chown <владелец> <путь> - изменяет владельца файла или каталога. Поле owner в структуре VFS обновляется в памяти.
Пример: chown admin home/user/docs/note.txt

vfs-load <файл> - загружает новую виртуальную файловую систему из указанного JSON-файла. Текущая VFS заменяется новой, а указатель пути сбрасывается в корень.
Пример: vfs-load VFS2.json

conf-dump - выводит текущую конфигурацию эмулятора: параметры запуска, путь к VFS и прочее.
Пример: conf-dump

exit - закрывает эмулятор.
Пример: exit

Ошибки:
При вводе неверных команд или некорректных путей выводятся сообщения вида:
Ошибка: неизвестная команда 'test'
Ошибка: файл /home/user/test.txt не найден
Ошибка: не каталог

Примеры использования через скрипты:
test_script_stage5.txt - скрипт для демонастрации работы всех команд и взаимодействия с вирутальной файловой системой на финальном эатпе

Git-сервисы:
github.com, gitlab.com, gitea.com, gitflic.ru, hub.mos.ru, gitverse.ru, gitee.com
